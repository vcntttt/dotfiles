#!/usr/bin/env bash

local name=""
local files=()

while [[ $# -gt 0 ]]; do
    case "$1" in
        -n|--name)
            name="$2"
            shift 2
        ;;
        *)
            files+=("$1")
            shift
        ;;
    esac
done

if [[ ${#files[@]} -eq 0 ]]; then
    echo "❌ No se especificaron archivos"
    return 1
fi

if [[ -z "$name" ]]; then
    read -r "?Nombre del archivo (sin extensión): " name
fi

[[ -z "$name" ]] && {
    echo "❌ Nombre inválido"
    return 1
}

tar --zstd -cf "${name}.tar.zst" "${files[@]}"
