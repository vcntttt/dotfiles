#!/usr/bin/env bash

set -e

file="$1"

if [[ ! -f "$file" ]]; then
  echo "No se encontrÃ³ '$file'"
  exit 1
fi

case "$file" in
  *.tar.zst)  tar --zstd -xf "$file" ;;
  *.tar.gz)   tar -xzf "$file" ;;
  *.tar.xz)   tar -xJf "$file" ;;
  *.tar)      tar -xf "$file" ;;
  *.zip)      unzip "$file" ;;
  *.rar)      unrar x "$file" ;;
  *.7z)       7z x "$file" ;;
  *)
    # try bsdtar fallback
    if command -v bsdtar &>/dev/null; then
      bsdtar -xf "$file"
    else
      echo "Formato no soportado: $file"
      exit 1
    fi
    ;;
esac
