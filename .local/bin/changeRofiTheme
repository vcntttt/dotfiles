#!/bin/bash

# Define la ruta a tu directorio de temas de Rofi y la ruta de configuración
THEME_DIR="$HOME/.config/rofi/themes"
CONF_DIR="$HOME/.config/rofi"

# Cambia al directorio de temas
cd $THEME_DIR

# Obtén solo los nombres de tus archivos .rasi, sin la ruta completa
themes=$(basename -a *.rasi)

# Usa Rofi para mostrar un menú con los nombres de tus temas
selected_theme=$(echo "$themes" | rofi -dmenu -p "Choose theme" -selected-row 0)

# Si se seleccionó un tema, reemplaza la línea de importación en tu archivo de configuración
if [ -n "$selected_theme" ]; then
    # Asegúrate de respaldar tu archivo de configuración antes de modificarlo
    cp $CONF_DIR/config.rasi $CONF_DIR/config_backup.rasi

    # Construye la ruta relativa al archivo de tema seleccionado
    relative_theme_path="themes/$selected_theme"

    # Usa sed para reemplazar la línea de importación con el nuevo tema
    sed -i "s|@import \".*\"|@import \"$relative_theme_path\"|" $CONF_DIR/config.rasi

    # No intente lanzar Rofi aquí. Solo modifica el archivo de configuración.
fi
